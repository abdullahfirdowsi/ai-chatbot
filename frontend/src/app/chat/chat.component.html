<div class="modern-chat-container">
  <!-- Chat Header -->
  <div class="chat-header">
    <div class="header-left">
      <div class="bot-avatar">
        <img src="images/logo.png" alt="AI Chatbot" class="bot-logo">
      </div>
      <div class="bot-info">
        <h3 class="bot-name">AI Chatbot</h3>
        <p class="bot-status">{{ isLoading ? 'Typing...' : 'Online' }}</p>
      </div>
    </div>
    <div class="header-actions">
      <button 
        mat-icon-button
        (click)="clearConversation()" 
        [disabled]="isLoading || messages.length === 0"
        matTooltip="Clear conversation"
        class="action-btn clear-btn">
        <mat-icon>refresh</mat-icon>
      </button>
    </div>
  </div>

  <!-- Messages Area -->
  <div class="messages-container" #messagesContainer>
    <!-- Welcome Message -->
    <div *ngIf="messages.length === 0" class="welcome-section">
      <div class="welcome-avatar">
        <img src="images/logo.png" 
             alt="AI Chatbot" 
             class="welcome-logo">
      </div>
      <div class="welcome-content">
        <h2 class="welcome-title">Hello! I'm your AI Assistant</h2>
        <p class="welcome-subtitle">I'm here to help answer your questions and assist with various tasks. What can I help you with today?</p>
        <div class="suggested-questions">
          <button 
            *ngFor="let suggestion of getSuggestedQuestions()" 
            class="suggestion-chip"
            (click)="userInput = suggestion; sendMessage()">
            {{ suggestion }}
          </button>
        </div>
      </div>
    </div>

    <!-- Chat Messages -->
    <div class="messages-list" *ngIf="messages.length > 0">
      <div *ngFor="let message of messages; trackBy: trackByMessageId" 
           [ngClass]="{'message-wrapper': true, 'user-message': message.sender === 'user', 'bot-message': message.sender === 'bot'}"
           class="fade-in">
        
        <!-- Bot Message -->
        <div *ngIf="message.sender === 'bot'" class="message-container bot">
          <div class="message-avatar">
            <img src="images/logo.png" 
                 alt="AI Chatbot" 
                 class="avatar-img">
          </div>
          <div class="message-content">
            <div class="message-bubble bot-bubble">
              <p class="message-text">{{ message.text }}</p>
            </div>
            <div class="message-meta">
              <span class="message-time">{{ formatTime(message.timestamp) }}</span>
            </div>
          </div>
        </div>

        <!-- User Message -->
        <div *ngIf="message.sender === 'user'" class="message-container user">
          <div class="message-content">
            <div class="message-bubble user-bubble">
              <p class="message-text">{{ message.text }}</p>
            </div>
            <div class="message-meta">
              <span class="message-time">{{ formatTime(message.timestamp) }}</span>
            </div>
          </div>
          <div class="message-avatar">
            <div class="user-avatar">
              <mat-icon>person</mat-icon>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Typing Indicator -->
    <div *ngIf="isLoading" class="typing-indicator">
      <div class="typing-avatar">
        <img src="images/logo.png" 
             alt="AI Chatbot" 
             class="avatar-img">
      </div>
      <div class="typing-bubble">
        <div class="typing-dots">
          <div class="dot"></div>
          <div class="dot"></div>
          <div class="dot"></div>
        </div>
      </div>
    </div>
  </div>

  <!-- Input Area -->
  <div class="input-area">
    <form (submit)="sendMessage(); $event.preventDefault()" class="message-form">
      <div class="input-wrapper">
        <input 
          [(ngModel)]="userInput" 
          name="userInput" 
          placeholder="Type your message here..." 
          [disabled]="isLoading"
          autocomplete="off"
          class="message-input" 
          #messageInput>
        <button 
          type="submit" 
          [disabled]="!userInput.trim() || isLoading"
          class="send-button"
          matTooltip="Send message">
          <mat-icon *ngIf="!isLoading">send</mat-icon>
          <mat-icon *ngIf="isLoading" class="loading-icon">hourglass_empty</mat-icon>
        </button>
      </div>
    </form>
    <div class="input-footer">
      <p class="disclaimer">AI Chatbot can make mistakes. Please verify important information.</p>
    </div>
  </div>
</div>
